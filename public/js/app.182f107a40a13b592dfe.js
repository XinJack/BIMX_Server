webpackJsonp([1],{31:function(e,t){},32:function(e,t,i){function n(e){i(93)}var s=i(97)(i(73),i(98),n,null,null);e.exports=s.exports},73:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(54),s=i.n(n),l=i(95),o=i.n(l);t.default={data:function(){return{models:[],model:{},app:null,viewer:null,selection:null,hiddenElements:[],translucentElements:[],selectionMode:"singleSelection",multiSelections:[],multiHiddenElements:[],multiTranslucentElements:[],multiIsolateElements:[]}},created:function(){var e=this;s.a.get("/api/models").then(function(t){var i=t.data;console.log(i);"success"===i.code&&(e.models=i.data,e.loadModel(e.models[0].modelId))})},methods:{handleMenuSelect:function(e,t){if("2"===t[0]){var i=e;return void this.loadModel(i)}if("5"===e)return void this.logout();if("3"===t[0]&&"multiSelection"===this.selectionMode)return void this.$alert("请先退出多选操作","操作错误",{confirmButtonText:"我知道了"});if("4"===t[0]&&"4-1"!==e&&"singleSelection"===this.selectionMode)return void this.$alert("请先启动多选操作","操作错误",{confirmButtonText:"我知道了"});if(null===this.viewer)return void this.$alert("请先加载模型","操作错误",{confirmButtonText:"我知道了"});switch(e){case"3-1":this.hideSelection();break;case"3-2":this.showLastHidden();break;case"3-3":this.showAllHidden();break;case"3-4":this.translucentSelection();break;case"3-5":this.showLastTranslucent();break;case"3-6":this.showAllTranslucent();break;case"3-7":this.zoomToSelectedComponents();break;case"3-8":this.isolateSelection();break;case"3-9":this.clearIsolation();break;case"4-1":this.clearSelections(),this.selectionMode="multiSelection";break;case"4-2":this.clearSelections(),this.hideAttributePane(document.getElementsByClassName("bf-panel")[0]),this.selectionMode="singleSelection";break;case"4-3":this.hideMultiSelection();break;case"4-4":this.showMultiSelection();break;case"4-5":this.translucentMultiSelection();break;case"4-6":this.showTranslucentMultiSelection();break;case"4-7":this.isolateMultiSelection();break;case"4-8":this.showIsolateMultiSelection();break;case"4-9":this.zoomToSelectedComponents();break;case"4-10":this.hideAttributePane(document.getElementsByClassName("bf-panel")[0]),this.multiSelections=[],this.clearSelections()}},logout:function(){s.a.get("/logout").then(function(e){console.log(e.data)}),window.location.href="/login"},reset:function(){this.app=null,this.viewer=null,this.selection=null,this.hiddenElements=[],this.translucentElements=[],this.selectionMode="singleSelection",this.multiSelections=[],this.multiHiddenElements=[],this.multiTranslucentElements=[],this.multiIsolateElements=[]},loadModel:function(e){var t=this;this.reset();var i=this.models[o.a.findIndex(this.models,{modelId:e})];this.model!==i&&(this.model=i,s.a.get("/api/viewToken",{params:{modelId:this.model.modelId,modelType:this.model.modelType}}).then(function(e){t.viewToken=e.data.data,t.$refs.bimx.innerHTML="";var i=new BimfaceSDKLoaderConfig;i.viewToken=t.viewToken,i.configuration=BimfaceConfigrationOption.Debug,BimfaceSDKLoader.load(i,t.onSDKLoadSucceeded,t.onSDKLoadFailed)}).catch(function(e){console.log(e),t.$alert("无法获取viweToken","加载模型失败",{confirmButtonText:"我知道了"})}))},onSDKLoadSucceeded:function(e){var t=this,i=Glodon.Bimface.Application.WebApplication3DConfig();i.domElement=this.$refs.bimx,this.app=new Glodon.Bimface.Application.WebApplication3D(i),this.app.addView(this.viewToken),this.viewer=this.app.getViewer();var n=new Glodon.Bimface.Data.MetaDataManagerConfig;n.viewToken=e.viewToken,n.viewToken=e.modelId,n.viewToken=e.modelType,this.dataManager=new Glodon.Bimface.Data.MetaDataManager(n);var s=Glodon.Bimface.Application.WebApplication3DEvent;this.app.addEventListener(s.ViewAdded,function(){t.viewer.render()}),this.app.addEventListener(s.ComponentsSelectionChanged,function(e){var i=document.getElementsByClassName("gld-bf-properties")[0],n=document.getElementsByClassName("bf-panel")[0];if(null===e)return t.selection=null,void 0!==n&&(n.style.display="none"),void("multiSelection"===t.selectionMode&&(t.viewer.addSelectedComponentsById(t.multiSelections),t.viewer.render()));t.showAttributePane(i,n),"singleSelection"===t.selectionMode?t.selection=e:"multiSelection"===t.selectionMode&&(t.multiSelections.push(e.objectId),t.viewer.addSelectedComponentsById(t.multiSelections))})},onSDKLoadFailed:function(e){console.log(e),this.$alert("无法加载模型","加载模型失败",{confirmButtonText:"我知道了"})},zoomToSelectedComponents:function(){this.viewer.zoomToSelectedComponents()},hideSelection:function(){if(null!==this.selection){var e=this.selection.objectId;this.viewer.hideComponents([e]),this.hiddenElements.push(e),this.selection=null,this.clearSelections(),this.hideAttributePane(document.getElementsByClassName("bf-panel")[0]),this.viewer.render()}},showLastHidden:function(){if(this.hiddenElements.length>0){var e=this.hiddenElements.pop();this.viewer.showComponents([e]),this.viewer.render()}},showAllHidden:function(){this.hiddenElements.length>0&&(this.viewer.showComponents(this.hiddenElements),this.viewer.render(),this.hiddenElements=[])},translucentSelection:function(){if(null!==this.selection){var e=this.selection.objectId;this.viewer.setComponentsOpacity([e],"Translucent"),this.translucentElements.push(e),this.selection=null,this.hideAttributePane(document.getElementsByClassName("bf-panel")[0]),this.clearSelections(),this.viewer.render()}},showLastTranslucent:function(){if(this.translucentElements.length>0){var e=this.translucentElements.pop();this.viewer.setComponentsOpacity([e],"Opaque"),this.viewer.render()}},showAllTranslucent:function(){this.translucentElements.length>0&&(this.viewer.setComponentsOpacity(this.translucentElements,"Opaque"),this.viewer.render(),this.translucentElements=[])},isolateSelection:function(){if(null!==this.selection){var e=this.selection.objectId;this.viewer.isolateComponentsById([e],"MakeOthersTranslucent"),this.selection=null,this.hideAttributePane(document.getElementsByClassName("bf-panel")[0]),this.clearSelections(),this.viewer.render()}},clearIsolation:function(){this.viewer.clearIsolation(),this.viewer.render()},hideMultiSelection:function(){var e=this;this.multiSelections.length>=0&&(this.multiSelections.forEach(function(t){e.multiHiddenElements.push(t)}),this.multiSelections=[],this.viewer.hideComponents(this.multiHiddenElements),this.hideAttributePane(document.getElementsByClassName("bf-panel")[0]),this.viewer.render())},showMultiSelection:function(){this.viewer.showComponents(this.multiHiddenElements),this.multiHiddenElements=[],this.clearSelections(),this.viewer.render()},translucentMultiSelection:function(){var e=this;this.multiSelections.length>=0&&(this.multiSelections.forEach(function(t){e.multiTranslucentElements.push(t)}),this.multiSelections=[],this.viewer.setComponentsOpacity(this.multiTranslucentElements,"Translucent"),this.hideAttributePane(document.getElementsByClassName("bf-panel")[0]),this.viewer.render())},showTranslucentMultiSelection:function(){this.viewer.setComponentsOpacity(this.multiTranslucentElements,"Opaque"),this.multiTranslucentElements=[],this.clearSelections(),this.viewer.render()},isolateMultiSelection:function(){var e=this;this.multiSelections.length>0&&(this.multiSelections.forEach(function(t){e.multiIsolateElements.push(t)}),this.multiSelections=[],this.viewer.isolateComponentsById(this.multiIsolateElements),this.hideAttributePane(document.getElementsByClassName("bf-panel")[0]),this.viewer.render())},showIsolateMultiSelection:function(){this.viewer.clearIsolation(),this.multiIsolateElements=[],this.clearSelections(),this.viewer.render()},hideAttributePane:function(e){void 0!==e&&(e.style.display="none")},showAttributePane:function(e,t){void 0===t?e.click():t.style.display="block"},clearSelections:function(){this.viewer&&(this.viewer.setSelectedComponentsById([]),this.viewer.render())}}}},74:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(3),s=i(32),l=i.n(s),o=i(30),a=i.n(o),r=i(31);i.n(r);n.default.config.productionTip=!1,n.default.use(a.a),new n.default({el:"#app",template:"<App/>",components:{App:l.a}})},93:function(e,t){},98:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"app"}},[i("div",{attrs:{id:"navbar"}},[i("el-menu",{attrs:{theme:"dark",mode:"horizontal"},on:{select:e.handleMenuSelect}},[i("el-menu-item",{attrs:{index:"1"}},[e._v("BIMX")]),e._v(" "),i("el-submenu",{attrs:{index:"2"}},[i("template",{slot:"title"},[e._v("加载模型")]),e._v(" "),e._l(e.models,function(t,n){return i("el-menu-item",{key:t.modelId,attrs:{index:t.modelId},domProps:{textContent:e._s(t.modelName)}})})],2),e._v(" "),i("el-submenu",{attrs:{index:"3"}},[i("template",{slot:"title"},[e._v("模型单选操作")]),e._v(" "),i("el-menu-item-group",[i("template",{slot:"title"},[e._v("隐藏")]),e._v(" "),i("el-menu-item",{attrs:{index:"3-1"}},[e._v("隐藏构件")]),e._v(" "),i("el-menu-item",{attrs:{index:"3-2"}},[e._v("恢复上一隐藏构件")]),e._v(" "),i("el-menu-item",{attrs:{index:"3-3"}},[e._v("恢复所有隐藏构件")])],2),e._v(" "),i("el-menu-item-group",[i("template",{slot:"title"},[e._v("半透明")]),e._v(" "),i("el-menu-item",{attrs:{index:"3-4"}},[e._v("半透明构件")]),e._v(" "),i("el-menu-item",{attrs:{index:"3-5"}},[e._v("恢复上一半透明构件")]),e._v(" "),i("el-menu-item",{attrs:{index:"3-6"}},[e._v("恢复所有半透明构件")])],2),e._v(" "),i("el-menu-item-group",[i("template",{slot:"title"},[e._v("其它")]),e._v(" "),i("el-menu-item",{attrs:{index:"3-7"}},[e._v("跳转到选中的构件")]),e._v(" "),i("el-menu-item",{attrs:{index:"3-8"}},[e._v("隔离选中的构件")]),e._v(" "),i("el-menu-item",{attrs:{index:"3-9"}},[e._v("恢复隔离构件")])],2)],2),e._v(" "),i("el-submenu",{attrs:{index:"4"}},[i("template",{slot:"title"},[e._v("模型多选操作")]),e._v(" "),i("el-menu-item-group",[i("template",{slot:"title"},[e._v("启动")]),e._v(" "),i("el-menu-item",{attrs:{index:"4-1"}},[e._v("开始多选操作")]),e._v(" "),i("el-menu-item",{attrs:{index:"4-2"}},[e._v("结束多选操作")])],2),e._v(" "),i("el-menu-item-group",[i("template",{slot:"title"},[e._v("隐藏")]),e._v(" "),i("el-menu-item",{attrs:{index:"4-3"}},[e._v("隐藏选中构件")]),e._v(" "),i("el-menu-item",{attrs:{index:"4-4"}},[e._v("恢复隐藏")])],2),e._v(" "),i("el-menu-item-group",[i("template",{slot:"title"},[e._v("半透明")]),e._v(" "),i("el-menu-item",{attrs:{index:"4-5"}},[e._v("半透明选中构件")]),e._v(" "),i("el-menu-item",{attrs:{index:"4-6"}},[e._v("恢复半透明")])],2),e._v(" "),i("el-menu-item-group",[i("template",{slot:"title"},[e._v("隔离")]),e._v(" "),i("el-menu-item",{attrs:{index:"4-7"}},[e._v("隔离选中构件")]),e._v(" "),i("el-menu-item",{attrs:{index:"4-8"}},[e._v("恢复隔离")])],2),e._v(" "),i("el-menu-item-group",[i("template",{slot:"title"},[e._v("其它")]),e._v(" "),i("el-menu-item",{attrs:{index:"4-9"}},[e._v("跳转到选中构件")]),e._v(" "),i("el-menu-item",{attrs:{index:"4-10"}},[e._v("清除当前选择集")])],2)],2),e._v(" "),i("el-menu-item",{staticClass:"logout",attrs:{index:"5"}},[e._v("退出登录")])],1)],1),e._v(" "),i("div",{ref:"bimx",attrs:{id:"bimx"}})])},staticRenderFns:[]}}},[74]);
//# sourceMappingURL=app.182f107a40a13b592dfe.js.map